# Component: `Portfolio`

## 1. 개요

사용자의 현재 투자 현황(포트폴리오)을 종합적으로 보여주는 대시보드 컴포넌트입니다.

## 2. 기능

-   **총 자산 표시:** 보유 현금과 보유 암호화폐의 현재 평가 가치를 합산한 총 자산을 원화로 표시합니다.
-   **보유 현금 표시:** 거래에 사용할 수 있는 현금 잔액을 보여줍니다.
-   **보유 자산 목록:**
    -   보유 중인 각 암호화폐에 대한 상세 정보를 목록 형태로 제공합니다.
    -   각 항목에는 자산명, 보유 수량, 평균 매수 단가(평단)가 표시됩니다.
    -   실시간 시세를 바탕으로 계산된 현재 평가 금액, 평가 손익, 수익률을 함께 보여줍니다.
    -   수익률이 플러스(+)이면 초록색, 마이너스(-)이면 빨간색으로 표시됩니다.
-   **실시간 가치 평가:** 30초마다 `/api/tickers` API를 호출하여 보유 자산의 현재가를 가져와 평가 금액과 수익률을 실시간으로 업데이트합니다.
-   **매도 기능 연동:** 각 자산 항목의 '매도' 버튼을 클릭하면 `handleOpenModal` 함수를 호출하여 매도 주문을 위한 거래 모달을 엽니다.

## 3. 주요 상태(State) 및 Props

### Props

| Prop              | 타입                                       | 필수 | 설명                                                              |
| ----------------- | ------------------------------------------ | ---- | ----------------------------------------------------------------- |
| `handleOpenModal` | `(ticker: Ticker, type: 'buy' | 'sell') => void` | 예   | '매도' 버튼 클릭 시 호출될 함수. 해당 암호화폐 정보와 거래 종류('sell')를 인자로 받습니다. |

### 내부 상태

-   `tickers`: 보유 자산의 실시간 시세 정보를 저장하는 객체 (`{ [market: string]: Ticker }`)

### Context 사용

-   `usePortfolio` 컨텍스트 훅을 사용하여 다음 상태를 가져옵니다.
    -   `cash`: 현재 보유 현금 (number)
    -   `assets`: 보유 자산 객체의 배열 (`Asset[]`)

## 4. 데이터 흐름

1.  `usePortfolio` 컨텍스트로부터 `cash`와 `assets` 데이터를 가져와 화면에 기본 정보를 표시합니다.
2.  `useEffect` 훅이 `assets` 배열의 변경을 감지하면, 보유한 모든 자산의 마켓 코드를 모아 `/api/tickers` API를 호출합니다.
3.  API 응답으로 받은 실시간 시세 정보를 `tickers` 상태에 저장합니다.
4.  `setInterval`을 사용하여 30초마다 이 API 호출을 반복하여 시세 정보를 최신으로 유지합니다.
5.  `totalAssetValue` 변수는 `assets` 배열을 순회하며 각 자산의 수량과 `tickers` 상태에 저장된 현재 가격을 곱하여 총 보유 자산 평가액을 계산합니다.
6.  계산된 총 보유 자산 평가액과 `cash`를 더해 총 자산을 계산하고 화면에 렌더링합니다.
7.  사용자가 특정 자산의 '매도' 버튼을 클릭하면, 해당 자산 정보와 'sell' 타입을 인자로 하여 `handleOpenModal` 함수를 호출합니다.
