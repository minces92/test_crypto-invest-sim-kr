# 향후 개선 과제 로드맵 (Enhancement Roadmap)

## 개요

이 문서는 크립토 투자 시뮬레이션 애플리케이션의 안정성, 유지보수성, 그리고 기능 확장을 위한 잠재적인 개선 과제 목록입니다. 현재까지의 구현 내용을 바탕으로 작성되었으며, 순차적으로 적용하여 프로젝트의 완성도를 높이는 것을 목표로 합니다.

---

## 1. 상태 관리 및 계산 로직 중앙화 [완료]

-   **문제점:** 포트폴리오(보유 현금 등)를 계산하는 로직이 클라이언트(`PortfolioContext.tsx`)와 서버(`api/transactions/route.ts`) 양쪽에 중복으로 존재했습니다. 이는 향후 로직 변경 시 양쪽을 모두 수정해야 하는 번거로움과 잠재적인 불일치 문제를 야기했습니다.
-   **개선 내용:**
    -   `calculatePortfolioState(transactions, initialCash)` 함수를 `lib/utils.ts`로 분리하여 공통으로 사용하도록 리팩토링했습니다.
    -   클라이언트(`PortfolioContext.tsx`)와 서버(`api/transactions/route.ts`) 모두 이 공통 함수를 import하여 사용하도록 수정했습니다. 이를 통해 계산 로직을 한 곳에서 관리하고 일관성을 보장할 수 있게 되었습니다.

## 2. 테스트 자동화 도입 [완료]

-   **문제점:** 프로젝트에 자동화된 테스트 코드가 부재하여 새로운 기능 추가 및 리팩토링 시 버그 발생 위험이 높았습니다.
-   **개선 내용:**
    -   `Vitest` 테스트 프레임워크를 도입하고 기본 설정을 완료했습니다.
    -   가장 핵심적인 로직인 `calculatePortfolioState` 함수에 대한 단위 테스트를 작성하여 코드의 정확성을 검증했습니다.

## 3. CI/CD 연동 (테스트 자동 실행)

-   **문제점:** 현재 테스트 코드가 작성되었지만, 코드 변경 시 자동으로 실행되지 않아 수동으로 테스트를 실행해야 합니다.
-   **개선 제안:**
    -   GitHub Actions와 같은 CI/CD 도구를 사용하여, 코드가 Git 저장소에 푸시될 때마다 자동으로 테스트가 실행되도록 워크플로우를 구축합니다. 이를 통해 코드 변경 시마다 자동으로 품질을 검증하고 버그를 조기에 발견할 수 있습니다.

## 4. AI 프롬프트 관리 개선

-   **문제점:** AI에게 전달되는 프롬프트가 API 라우트 파일 내에 긴 문자열 형태로 하드코딩되어 있습니다. 이는 프롬프트를 수정하거나 여러 버전을 관리하기 어렵게 만듭니다.
-   **개선 제안:**
    -   프롬프트 내용을 별도의 템플릿 파일(예: `.txt` 또는 `.md` 파일)로 분리합니다.
    -   API 라우트에서는 이 템플릿 파일을 읽어와 동적으로 필요한 값(예: 마켓, 현재 가격)을 주입하여 사용하도록 변경합니다. 이를 통해 코드와 콘텐츠를 분리하여 유지보수성을 높일 수 있습니다.

## 5. UI/UX 경험 향상

-   **문제점:** '초기 자본금' 저장 후 페이지 전체를 새로고침하는 등, 일부 사용자 경험이 다소 매끄럽지 못합니다. 데이터 변경 시 UI가 자동으로 업데이트되지 않는 경우가 있습니다.
-   **개선 제안:**
    -   `SWR`이나 `React Query` 같은 데이터 페칭 및 캐싱 라이브러리를 적극적으로 활용하여 데이터 변경 후 관련 UI가 자동으로 갱신되도록 구현합니다. (예: 자본금 저장 후, 포트폴리오 데이터만 다시 불러와 UI 업데이트)
    -   버튼 클릭 시 로딩 스피너를 표시하거나 비활성화 상태를 명확히 하여 사용자에게 작업이 진행 중임을 시각적으로 알립니다.

## 6. 환경 변수 및 설정 관리 강화

-   **문제점:** API URL, 기본값 등 일부 설정들이 코드 내에 하드코딩되어 있습니다.
-   **개선 제안:**
    -   모든 주요 설정(API 키, 기본값, 외부 URL 등)을 `.env` 파일을 통해 환경 변수로 관리하도록 통일합니다.
    -   이를 통해 개발, 테스트, 프로덕션 환경별로 다른 설정을 쉽게 주입할 수 있어 애플리케이션의 유연성과 확장성을 높일 수 있습니다.