# Component: `TradeModal`

## 1. 개요

사용자가 암호화폐를 매수하거나 매도할 때 사용하는 모달(Modal) 창 컴포넌트입니다.

## 2. 기능

-   **모달 표시/숨김:** `show` prop에 따라 모달 창이 화면에 나타나거나 사라집니다.
-   **거래 대상 표시:** `ticker` prop으로 전달받은 암호화폐의 이름, 심볼, 현재 가격을 표시합니다.
-   **가격 차트:** `ChartComponent`를 내부에 포함하여 거래 대상 암호화폐의 최근 가격 추이를 보여줍니다.
-   **매수/매도 탭:** 사용자가 '매수'와 '매도' 탭을 전환하여 주문 유형을 선택할 수 있습니다.
-   **주문 가능 금액/수량 표시:**
    -   매수 시: 사용자의 현재 보유 현금을 표시합니다.
    -   매도 시: 사용자가 보유한 해당 암호화폐의 수량을 표시합니다.
-   **수량 입력 및 총액 계산:** 사용자가 주문할 수량을 입력하면, 현재 가격을 기준으로 주문 총액이 자동으로 계산되어 표시됩니다.
-   **거래 실행:**
    -   '매수' 또는 '매도' 버튼을 클릭하면 `handleTrade` 함수가 실행됩니다.
    -   입력된 수량의 유효성을 검사합니다.
    -   `PortfolioContext`의 `buyAsset` 또는 `sellAsset` 함수를 호출하여 실제 거래 로직을 수행합니다.
    -   매도 시 보유 수량을 초과하는 주문은 막습니다.
-   거래가 성공적으로 완료되면 모달을 닫고 입력 필드를 초기화합니다.

## 3. 주요 상태(State) 및 Props

### Props

| Prop               | 타입                     | 필수 | 설명                                                    |
| ------------------ | ------------------------ | ---- | ------------------------------------------------------- |
| `show`             | boolean                  | 예   | 모달의 표시 여부를 결정합니다.                          |
| `handleClose`      | `() => void`             | 예   | 모달을 닫을 때 호출될 함수입니다.                       |
| `ticker`           | `Ticker | null`           | 예   | 거래할 암호화폐의 정보 객체입니다.                      |
| `initialOrderType` | `'buy' | 'sell'`         | 예   | 모달이 열릴 때 기본으로 선택될 주문 유형입니다.         |

### 내부 상태

-   `orderType`: 현재 선택된 주문 유형 ('buy' 또는 'sell')
-   `amount`: 사용자가 입력한 주문 수량 (string)
-   `total`: 주문 수량과 현재 가격을 곱한 총 주문 금액 (number)

### Context 사용

-   `usePortfolio` 컨텍스트 훅을 사용하여 다음을 가져옵니다.
    -   `cash`: 현재 보유 현금
    -   `assets`: 보유 자산 배열
    -   `buyAsset(...)`: 매수 로직을 처리하는 함수
    -   `sellAsset(...)`: 매도 로직을 처리하는 함수

## 4. 상호작용

1.  부모 컴포넌트에서 `handleOpenModal`이 호출되면 `show` prop이 `true`가 되어 모달이 나타납니다.
2.  사용자는 매수/매도 탭을 선택하고, 수량 입력 필드에 원하는 수량을 입력합니다.
3.  `amount` 상태가 변경될 때마다 `useEffect` 훅이 주문 총액 `total`을 다시 계산합니다.
4.  사용자가 최종적으로 '매수' 또는 '매도' 버튼을 클릭하면 `handleTrade` 함수가 실행됩니다.
5.  `handleTrade`는 `PortfolioContext`의 `buyAsset` 또는 `sellAsset`를 호출하여 포트폴리오 상태를 업데이트합니다.
6.  거래가 성공하면 `handleClose` prop 함수를 호출하여 모달을 닫습니다.
