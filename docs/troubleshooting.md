# 문제 해결 가이드

## 일반적인 문제

### 1. 버튼이 작동하지 않음

**원인:**
- JavaScript 에러
- 이벤트 핸들러 미등록
- 브라우저 콘솔 오류

**해결 방법:**
1. 브라우저 개발자 도구 열기 (F12)
2. Console 탭에서 오류 확인
3. 오류 메시지에 따라 수정

**확인 사항:**
- `PortfolioContext`가 제대로 마운트되었는지
- API 응답이 정상인지
- 네트워크 탭에서 API 호출 확인

### 2. 차트가 데이터를 표시하지 않음

**원인:**
- API 호출 실패
- 데이터 형식 불일치
- 차트 라이브러리 초기화 실패

**해결 방법:**

1. **API 확인:**
   ```bash
   # 브라우저에서 직접 확인
   http://localhost:3000/api/candles?market=KRW-BTC&count=30
   ```

2. **브라우저 콘솔 확인:**
   - F12 → Console 탭
   - "차트 데이터를 불러오지 못했습니다" 메시지 확인
   - 오류 메시지에 따라 조치

3. **네트워크 확인:**
   - F12 → Network 탭
   - `/api/candles` 요청 확인
   - 응답 상태 코드 확인 (200이어야 함)

4. **캐시 데이터베이스 확인:**
   ```bash
   # 프로젝트 루트에 crypto_cache.db 파일 확인
   # 필요시 삭제 후 재시작
   ```

### 3. 구매 창이 화면 하단에 가버림

**해결됨:** ✅
- TradeModal이 이제 화면 중앙에 고정된 팝업으로 표시됩니다
- 배경 클릭 시 닫힘
- 스크롤 가능한 모달

**추가 확인:**
- 모달이 보이지 않으면 `z-index` 확인
- 브라우저 확대/축소 확인 (100% 권장)

### 4. Ollama 작동 여부 확인

**방법 1: UI에서 확인**
- 페이지 하단의 "Ollama 상태" 박스 확인
- 상태: "연결됨" / "연결 안 됨" / "확인 중..."
- 설치된 모델 목록 표시

**방법 2: 명령어로 확인**
```powershell
# Ollama 연결 확인
Invoke-RestMethod -Uri "http://localhost:11434/api/tags"

# 또는
curl http://localhost:11434/api/tags
```

**방법 3: 브라우저에서 확인**
```
http://localhost:11434/api/tags
```

**Ollama가 연결 안 되는 경우:**
1. Ollama가 실행 중인지 확인
   ```powershell
   # Ollama 서비스 시작
   Start-Service Ollama
   
   # 또는 수동 실행
   ollama serve
   ```

2. 포트 확인
   ```powershell
   netstat -ano | findstr :11434
   ```

3. 방화벽 확인
   - Windows 방화벽에서 포트 11434 허용

4. 모델 설치 확인
   ```powershell
   ollama list
   ```

## API 오류

### Upbit API 오류
- **429 Too Many Requests**: API 호출 제한 초과
  - 해결: 잠시 후 재시도
  - 캐시 사용으로 호출 횟수 감소

- **500 Internal Server Error**: 서버 오류
  - 해결: Upbit API 상태 확인
  - 캐시된 데이터 사용

### 캐시 데이터베이스 오류
```bash
# 오류 발생 시
1. crypto_cache.db 파일 삭제
2. 프로젝트 재시작
3. 데이터베이스 자동 재생성
```

### SqliteError: no such column
- **오류 메시지**: `SqliteError: no such column: is_auto` 와 유사한 오류
- **원인**: 애플리케이션 업데이트 이후 데이터베이스 스키마(테이블 구조)가 변경되었지만, 기존에 사용하던 `crypto_cache.db` 파일이 이전 구조를 그대로 가지고 있어 발생합니다.
- **해결 방법**:
  1. **자동 마이그레이션**: 현재 애플리케이션에는 테이블 구조를 자동으로 감지하고 누락된 컬럼을 추가하는 기능이 내장되어 있어 대부분의 경우 재시작만으로 해결됩니다.
  2. **수동 초기화**: 만약 오류가 지속된다면, 가장 확실한 방법은 데이터베이스 파일을 초기화하는 것입니다. 아래 명령어를 실행하면 기존 데이터베이스 파일이 삭제되고 새로운 구조로 다시 생성됩니다.
     ```bash
     node scripts/reset-db.js
     ```

## 성능 문제

### 차트 로딩이 느림
- 캐시 데이터 사용 (1시간)
- 네트워크 상태 확인
- 데이터 개수 줄이기 (count 파라미터)

### AI 응답이 느림
- 모델 크기 확인 (작은 모델 사용 권장)
- GPU 사용 여부 확인
- 다른 모델로 변경 시도

## 브라우저 호환성

### 권장 브라우저
- Chrome (최신)
- Edge (최신)
- Firefox (최신)

### 지원하지 않는 기능
- IE 11 이하
- 오래된 모바일 브라우저

## 개발자 도구 사용법

### 콘솔 확인
```javascript
// F12 → Console 탭
// 오류 메시지 확인
// API 응답 확인
```

### 네트워크 확인
```javascript
// F12 → Network 탭
// /api/ 요청 확인
// 응답 내용 확인
```

### React DevTools
- React 컴포넌트 상태 확인
- Props 확인
- State 디버깅

## 자주 묻는 질문

### Q: 차트가 아무것도 안 보여요
A: 
1. 브라우저 콘솔 확인 (F12)
2. API 응답 확인
3. 네트워크 탭에서 `/api/candles` 요청 확인

### Q: 버튼을 눌러도 아무 반응이 없어요
A:
1. 브라우저 콘솔 오류 확인
2. JavaScript 활성화 확인
3. 페이지 새로고침 (Ctrl+F5)

### Q: Ollama가 연결되었다고 나오는데 AI가 작동 안 해요
A:
1. 환경변수 확인 (`.env.local`)
2. 모델이 제대로 설치되었는지 확인
3. 브라우저 콘솔에서 AI API 호출 확인

### Q: 구매 창이 안 보여요
A:
1. 모달이 화면 밖에 있는지 확인
2. 브라우저 확대/축소 확인
3. z-index 충돌 확인 (개발자 도구)

## 추가 지원

문제가 계속되면:
1. 브라우저 콘솔 전체 오류 캡처
2. 네트워크 탭 스크린샷
3. `docs/` 폴더의 관련 문서 확인

