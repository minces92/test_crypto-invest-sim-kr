# 향후 개선 과제 로드맵 (Enhancement Roadmap)

## 개요

이 문서는 크립토 투자 시뮬레이션 애플리케이션의 안정성, 유지보수성, 그리고 기능 확장을 위한 잠재적인 개선 과제 목록입니다. 현재까지의 구현 내용을 바탕으로 작성되었으며, 순차적으로 적용하여 프로젝트의 완성도를 높이는 것을 목표로 합니다.

---

## 1. 상태 관리 및 계산 로직 중앙화

-   **문제점:** 포트폴리오(보유 현금 등)를 계산하는 로직이 클라이언트(`PortfolioContext.tsx`)와 서버(`api/transactions/route.ts`) 양쪽에 중복으로 존재합니다. 이는 향후 로직 변경 시 양쪽을 모두 수정해야 하는 번거로움과 잠재적인 불일치 문제를 야기합니다.
-   **개선 제안:**
    -   `calculatePortfolioState(transactions, initialCash)`와 같은 형태의 순수 함수를 `lib/utils.ts` 등의 공통 유틸리티 파일로 분리합니다.
    -   클라이언트와 서버 모두 이 공통 함수를 import하여 사용하도록 코드를 리팩토링합니다. 이를 통해 계산 로직을 한 곳에서 관리하고 일관성을 보장할 수 있습니다.

## 2. 테스트 자동화 도입

-   **문제점:** 현재 프로젝트에는 자동화된 테스트 코드가 부재합니다. 이로 인해 새로운 기능을 추가하거나 기존 코드를 리팩토링할 때, 예기치 않은 버그가 발생할 위험이 있으며 모든 기능을 수동으로 테스트해야 하는 부담이 있습니다.
-   **개선 제안:**
    -   **단위 테스트(Unit Tests):** `Jest` 또는 `Vitest` 같은 테스트 프레임워크를 도입하여, 포트폴리오 계산 함수, 전략 파라미터 생성 로직 등 핵심 순수 함수들에 대한 단위 테스트를 작성합니다.
    -   **E2E 테스트(End-to-End Tests):** `Playwright` 또는 `Cypress`를 도입하여, '거래 추가', '전략 적용' 등과 같은 핵심 사용자 시나리오에 대한 자동화된 E2E 테스트를 구축합니다.

## 3. AI 프롬프트 관리 개선

-   **문제점:** AI에게 전달되는 프롬프트가 API 라우트 파일 내에 긴 문자열 형태로 하드코딩되어 있습니다. 이는 프롬프트를 수정하거나 여러 버전을 관리하기 어렵게 만듭니다.
-   **개선 제안:**
    -   프롬프트 내용을 별도의 템플릿 파일(예: `.txt` 또는 `.md` 파일)로 분리합니다.
    -   API 라우트에서는 이 템플릿 파일을 읽어와 동적으로 필요한 값(예: 마켓, 현재 가격)을 주입하여 사용하도록 변경합니다. 이를 통해 코드와 콘텐츠를 분리하여 유지보수성을 높일 수 있습니다.

## 4. UI/UX 경험 향상

-   **문제점:** '초기 자본금' 저장 후 페이지 전체를 새로고침하는 등, 일부 사용자 경험이 다소 매끄럽지 못합니다. 데이터 변경 시 UI가 자동으로 업데이트되지 않는 경우가 있습니다.
-   **개선 제안:**
    -   `SWR`이나 `React Query` 같은 데이터 페칭 및 캐싱 라이브러리를 적극적으로 활용하여 데이터 변경 후 관련 UI가 자동으로 갱신되도록 구현합니다. (예: 자본금 저장 후, 포트폴리오 데이터만 다시 불러와 UI 업데이트)
    -   버튼 클릭 시 로딩 스피너를 표시하거나 비활성화 상태를 명확히 하여 사용자에게 작업이 진행 중임을 시각적으로 알립니다.

## 5. 환경 변수 및 설정 관리 강화

-   **문제점:** API URL, 기본값 등 일부 설정들이 코드 내에 하드코딩되어 있습니다.
-   **개선 제안:**
    -   모든 주요 설정(API 키, 기본값, 외부 URL 등)을 `.env` 파일을 통해 환경 변수로 관리하도록 통일합니다.
    -   이를 통해 개발, 테스트, 프로덕션 환경별로 다른 설정을 쉽게 주입할 수 있어 애플리케이션의 유연성과 확장성을 높일 수 있습니다.